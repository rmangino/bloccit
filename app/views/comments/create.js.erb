<% if @comment.valid? %>

  <%# Add this new comment to the top of the existing comments list %>
  $('.js-comments').prepend("<%= escape_javascript(render(@comment)) %>");

  <%# Fill the new comment form field with a new (empty) comment. If we don't do %>
  <%# this the old comment text remains in the form field %>
  $('.new-comment').html("<%= escape_javascript(render partial: 'comments/form', locals: { post: @post, comment: @new_comment }) %>");

<% else %>

   $('.new-comment').html("<%= escape_javascript(render partial: 'comments/form', locals: { post: @post, comment: @comment }) %>");

<% end %>